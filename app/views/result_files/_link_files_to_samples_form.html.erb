<h3><%= heading %></h3>
<% form_tag(:action => :debug) do  %>
<table class="form-with-columns" border="0">
    <tr>
      <th>Link to Sample(s)</th>
      <th>Select Sample(s)</th>
      <th>Filename</th>
      <th>Content Type</th>
      <th>File Size</th>
      <th>Updated By</th>
      <th>Lab</th>
      <th>Notes</th>
    </tr>
    
	<% @result_files.each do |file| %>
	<% fields_for 'result_files[]', file do |f| %>
    <!-- TODO: -->
	<!-- check file against linked file list to determine checked status -->
    <!-- prepare input fields to write to both results_files for updates, and to linked table -->
	<!-- get username and labname for display, rather than just the numbers -->
    <tr>	
      <td><%=f.collection_select(:sample_ids, @samples, :id, :barcode_and_name, {:selected => file.sample_ids}, {:multiple => true, :size => 4})%>              
      <td><%= h file.document %></td>
      <td><%= h file.document_content_type %></td>
      <td><%= h file.document_file_size %></td>
      <td><%= h file.updated_by %></td>
      <td><%= h file.lab_id %></td>
      <td><%= f.text_area(:notes, :rows => 3, :cols => 15) %></td>
    </tr>    
    <% end %>   
</table>
<%= break_clear(f.submit "Save") %>
<% end %>
